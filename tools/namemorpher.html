<html>
	<head>
		<title>Name Morpher - YouTube Video Name Generator</title>
		<link rel="stylesheet" type="text/css" href="../data/css/iframe_main.css">
	</head>
	
	<style type = "text/css">
		
		table {
			width: 100%;
		}
		.text_field {
			width: 100%;
		}
	</style>
	
	<script type = "text/javascript">
		function generate() {
			//One function to do it all.
			var filename = document.getElementById('fn_tb').value;
			if (filename[0] != "[") {
				document.getElementById('r_tb').value = "Invalid File Name";
				return; //Done immediately. Have a nice day.
			} else {
				document.getElementById('r_tb').value = ""; //Blank it first.
				var year, month, day, hour, minute, map, pos, people, game;
				pos = 1;
				
				//Get Day information
				year   = ReadUntilChar(filename, '-', pos); pos += year.length + 1;
				month  = ReadUntilChar(filename, '-', pos); pos += month.length + 1;
				day    = ReadUntilChar(filename, '-', pos); pos += 5;
				
				//Get time information
				hour   = ReadUntilChar(filename, ' ', pos); pos += hour.length + 1;
				minute = ReadUntilChar(filename, ']', pos); pos += minute.length;
				
				//Get the other information
				map    = filename.substr(pos + 2);
				game   = document.getElementById('g_tb').value;
				people = document.getElementById('p_tb').value;
				
				document.getElementById('r_tb').value = "[" + year + "/" + month + "/" + day + " - " + MilitaryToUSTime(parseInt(hour), parseInt(minute)) + "] " + game + ": " + map;
				
				//Add in names if possible.
				if (people != "")
					document.getElementById('r_tb').value += " w/ " + people;
			}
		}
		
		function ReadUntilChar(string, stop, pos) {
			var tmp = "";
			
			//Scan until the desired char was met.
			for (var i = pos; i < string.length; i++) {
				pos = i;
				if (string[i] != stop)
					tmp += string[i];
				else
					break;
			}
			
			//Return copied string.
			return tmp;
		}
		
		function MilitaryToUSTime(hr, min) {
			var bonus = "";
			if (min < 10)
				bonus = "0";
			
			if (hr > 12)
				return String(hr - 12) + ":" + bonus + String(min) + " PM";
			else
			if (hr == 12)
				return String(hr) + ":" + bonus + String(min) + " PM";
			else
				return String(hr) + ":" + bonus + String(min) + " AM";
		}
	</script>
	
	<body>
		<!-- Appearance -->
		<table width = "100%">
			<tr>
				<td width = "80px">File Name:</td>
				<td><input type = "text" class = "text_field" id = "fn_tb" onkeyup = "generate();" onkeydown = "generate();"/></td>
			</tr>
			<tr>
				<td width = "80px">Game:</td>
				<td><input type = "text" class = "text_field" id = "g_tb" onkeyup = "generate();" onkeydown = "generate();"/></td>
			</tr>
			<tr>
				<td width = "80px">People:</td>
				<td><input type = "text" class = "text_field" id = "p_tb" onkeyup = "generate();" onkeydown = "generate();"/></td>
			</tr>
			<tr>
				<td width = "80px">Result:</td>
				<td><input type = "text" class = "text_field" id = "r_tb"/></td>
			</tr>
		</table>
	</body>
</html>